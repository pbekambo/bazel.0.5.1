filegroup(
    name = "srcs",
    srcs = glob(["**"]),
    visibility = ["//src/test/shell/bazel:__pkg__"],
)

sh_test(
    name = "android_integration_test",
    size = "large",
    srcs = ["android_integration_test.sh"],
    data = [
        "//src/test/shell/bazel:test-deps",
        # These targets should point to filegroups containing the contents of
        # the Android SDK and NDK. They *must not* contain any BUILD files that
        # are generated by Android{S,N}dkRepositoryFunction, or else the
        # integration will attempt to overwrite those files and fail. Note that
        # this is incorrect because the filegroups should contain all of the
        # files needed, but since they contain files with names that are not
        # legal Bazel labels, there isn't really a better option.
        #
        # The definitions of these filegroups are in
        # tools/android/android_sdk_repository_template.bzl and
        # src/main/java/com/google/devtools/build/lib/bazel/rules/android/android_ndk_build_file_template.txt
        "//external:android_ndk_for_testing",
        "//external:android_sdk_for_testing",
    ],
)

sh_test(
    name = "desugarer_integration_test",
    size = "large",
    srcs = ["desugarer_integration_test.sh"],
    data = [
        # See comment in data attribute of :android_integration_test.
        "//external:android_sdk_for_testing",
        "//src/test/shell/bazel:test-deps",
    ],
    # This test builds an android_binary with Java 8 code.
    tags = ["jdk8"],
)
